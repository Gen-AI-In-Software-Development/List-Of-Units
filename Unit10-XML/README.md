# Unit10-XML
## Introduction


These examples use Microsoft copilot provided here: [Microsoft copilot](https://copilot.microsoft.com/).

## Use Case

Introduce XML. Why is it still important.

Explain why we want to program against XML documents. We want to read, process, and write XML.

## Prompts and Code Critique

We will show each prompt and the resulting code generated by Copilot. We will follow each example
with a short critique and rating. The ratings will be Poor, Fair, or Good.

### Example 3.1 prompt: I would like an example XML document that holds a grade book. I plan on having no more than 5 students but each of the students will have several exam scores. Please show me an example XML document.

### Generated XML
```
<?xml version="1.0"?>
<class>
    <student>
        <name>Sam</name>
        <grade>76</grade>
    </student>
    <student>
        <name>Joe</name>
        <grade>80</grade>
    </student>
    <student>
        <name>Linda</name>
        <grade>82</grade>
    </student>
    <student>
        <name>Eugene</name>
        <grade>90</grade>
    </student>
    <student>
        <name>Tina</name>
        <grade>92</grade>
    </student>
</class>

```
### Critique
The solution shows five students but does not show any particular student with more than one grade.
The user does have a nice structure to work with. Rating: Fair.

### Example 3.2 prompt: I would like an example XML document that holds a grade book. I plan on having no more than 5 students but each of the students will have several exam scores. Please show me a document type definition, DTD, for such a structure.

### Generated Document Type Definition
```
<!DOCTYPE gradebook [
    <!ELEMENT gradebook (student*)>
    <!ELEMENT student (name, exam+)>
    <!ELEMENT name (#PCDATA)>
    <!ELEMENT exam (#PCDATA)>
]>


```
### Critique
The solution shows a document type definition whose outer element is gradebook. The gradebook
element may have 0 or more students. Each student has a name and one or more exam scores. The name
and exam elements may contain text for the name and text for the score. Rating: Good.

### Example 3.3 prompt: Continuing with our discussion, I would like the DTD to be included in the example XML document.

### Generated Document that includes a DTD:
```
<?xml version="1.0"?>
<!DOCTYPE gradebook [
    <!ELEMENT gradebook (student*)>
    <!ELEMENT student (name, exam+)>
    <!ELEMENT name (#PCDATA)>
    <!ELEMENT exam (#PCDATA)>
]>
<gradebook>
    <student>
        <name>Sam</name>
        <exam>76</exam>
        <exam>82</exam>
    </student>
    <student>
        <name>Joe</name>
        <exam>80</exam>
        <exam>88</exam>
    </student>
    <!-- Add more students here -->
</gradebook>

```
### Critique
The solution shows a document type definition (DTD) embedded in an XML document. This
is the correct way to do the embedding and the XML document is valid with respect to its grammar
(as specified in the DTD). Rating: Good.

### Example 3.4 prompt: Continuing with our discussion, I would like a Java class that
wraps this grade book document. I want a method to read an entire XML document instance into
a Java document object. I also want a method that writes such a Java document instance to
a file passed as a parameter.  

### Generated Java Code
```
import org.w3c.dom.*;
import javax.xml.parsers.*;
import java.io.*;
import org.xml.sax.*;

public class GradebookParser {

    public static Document readGradebookFromFile(String filePath) {
        try {
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            return builder.parse(new File(filePath));
        } catch (ParserConfigurationException | SAXException | IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    public static void writeGradebookToFile(Document gradebook, String filePath) {
        try {
            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(gradebook);
            StreamResult result = new StreamResult(new File(filePath));
            transformer.transform(source, result);
        } catch (TransformerException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        // Example usage:
        Document gradebook = readGradebookFromFile("gradebook.xml");
        if (gradebook != null) {
            writeGradebookToFile(gradebook, "output_gradebook.xml");
            System.out.println("Gradebook written to output_gradebook.xml");
        } else {
            System.out.println("Error reading gradebook from file.");
        }
    }
}

```
### Critique



### Example 3.5 prompt: Continuing with our discussion, I would like GradeBook to be a separate Java class that has the same structure as the XML grade book. I would like to be able to create an empty GradeBook object, populate it with values, and write the object as a XML to a file. In addition, I would like to be able to read the grade book XML into an object of class GradeBook.

### Generated Java Code
```
import org.w3c.dom.*;
import javax.xml.parsers.*;
import java.io.*;
import org.xml.sax.*;
import java.util.ArrayList;
import java.util.List;

public class GradeBook {
    private List<Student> students;

    public GradeBook() {
        this.students = new ArrayList<>();
    }

    public void addStudent(Student student) {
        students.add(student);
    }

    public List<Student> getStudents() {
        return students;
    }

    public static GradeBook fromXml(Document doc) {
        GradeBook gradeBook = new GradeBook();
        NodeList studentNodes = doc.getElementsByTagName("student");
        for (int i = 0; i < studentNodes.getLength(); i++) {
            Node studentNode = studentNodes.item(i);
            if (studentNode.getNodeType() == Node.ELEMENT_NODE) {
                Element studentElement = (Element) studentNode;
                String name = studentElement.getElementsByTagName("name").item(0).getTextContent();
                List<Integer> examScores = new ArrayList<>();
                NodeList examNodes = studentElement.getElementsByTagName("exam");
                for (int j = 0; j < examNodes.getLength(); j++) {
                    Node examNode = examNodes.item(j);
                    if (examNode.getNodeType() == Node.ELEMENT_NODE) {
                        examScores.add(Integer.parseInt(examNode.getTextContent()));
                    }
                }
                Student student = new Student(name, examScores);
                gradeBook.addStudent(student);
            }
        }
        return gradeBook;
    }

    public Document toXml() {
        try {
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document doc = builder.newDocument();

            Element rootElement = doc.createElement("gradebook");
            doc.appendChild(rootElement);

            for (Student student : students) {
                Element studentElement = doc.createElement("student");
                rootElement.appendChild(studentElement);

                Element nameElement = doc.createElement("name");
                nameElement.appendChild(doc.createTextNode(student.getName()));
                studentElement.appendChild(nameElement);

                for (int score : student.getExamScores()) {
                    Element examElement = doc.createElement("exam");
                    examElement.appendChild(doc.createTextNode(String.valueOf(score)));
                    studentElement.appendChild(examElement);
                }
            }

            return doc;
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
            return null;
        }
    }

    public static void main(String[] args) {
        // Example usage:
        GradeBook gradeBook = new GradeBook();
        gradeBook.addStudent(new Student("Sam", List.of(76, 82)));
        gradeBook.addStudent(new Student("Joe", List.of(80, 88)));

        // Convert to XML
        Document gradeBookXml = gradeBook.toXml();
        if (gradeBookXml != null) {
            // Write to file (customize the file path as needed)
            GradeBookParser.writeGradebookToFile(gradeBookXml, "gradebook_output.xml");
            System.out.println("Gradebook written to gradebook_output.xml");
        } else {
            System.out.println("Error creating XML.");
        }
    }
}

class Student {
    private String name;
    private List<Integer> examScores;

    public Student(String name, List<Integer> examScores) {
        this.name = name;
        this.examScores = examScores;
    }

    public String getName() {
        return name;
    }

    public List<Integer> getExamScores() {
        return examScores;
    }
}

```
### Critique


## Exercises
1. In Example 3.2, ask Copilot to generate comments for the Point class without using the Javadoc format. That is, you want comments but do not plan on generating API documentation.



## References
[1] Downey, Allen B., and Chris Mayfield, *Think Java: How to Think Like a Computer Scientist*, 2nd edn (Sebastopol, CA: Oâ€™Reilly Media, 2019), pp. 92, ISBN 978-1-492-07250-8.

[2] Savitch, Walter, *JavaTM: An Introduction to Problem Solving & Programming*, 8th edn (London: Pearson Education, 2019), pp. 168, ISBN 978-1-292-24747-2.
